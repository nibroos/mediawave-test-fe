import{b7 as fe}from"./DPHdV5Tz.js";function me(Z,H){for(var g=0;g<H.length;g++){const E=H[g];if(typeof E!="string"&&!Array.isArray(E)){for(const b in E)if(b!=="default"&&!(b in Z)){const N=Object.getOwnPropertyDescriptor(E,b);N&&Object.defineProperty(Z,b,N.get?N:{enumerable:!0,get:()=>E[b]})}}}return Object.freeze(Object.defineProperty(Z,Symbol.toStringTag,{value:"Module"}))}var he={exports:{}};(function(Z){(function(H){Z.exports?(H.default=H,Z.exports=H):H(typeof Highcharts<"u"?Highcharts:void 0)})(function(H){var g=H?H._modules:{};function E(b,N,D,z){b.hasOwnProperty(N)||(b[N]=z.apply(null,D),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:N,module:b[N]}})))}E(g,"Series/NodesComposition.js",[g["Core/Series/SeriesRegistry.js"],g["Core/Utilities.js"]],function(b,N){var D;let{series:{prototype:z,prototype:{pointClass:{prototype:w}}}}=b,{defined:L,extend:I,find:d,merge:h,pick:i}=N;return function(o){function n(){return this.data=[].concat(this.points||[],this.nodes),z.destroy.apply(this,arguments)}function p(){this.nodes&&(this.nodes.forEach(l=>{l.destroy()}),this.nodes.length=0),z.setData.apply(this,arguments)}function y(l){let s=arguments,t=this.isNode?this.linksTo.concat(this.linksFrom):[this.fromNode,this.toNode];l!=="select"&&t.forEach(r=>{r&&r.series&&(w.setState.apply(r,s),!r.isNode&&(r.fromNode.graphic&&w.setState.apply(r.fromNode,s),r.toNode&&r.toNode.graphic&&w.setState.apply(r.toNode,s)))}),w.setState.apply(this,s)}function f(l,s,t,r){let S=this.series.options.nodes,a=this.series.options.data,m=a&&a.length||0,v=a&&a[this.index];if(w.update.call(this,l,!this.isNode&&s,t,r),this.isNode){let W=(S||[]).reduce((c,u,k)=>this.id===u.id?k:c,-1),e=h(S&&S[W]||{},a&&a[this.index]||{});a&&(v?a[this.index]=v:a.length=m),S?W>=0?S[W]=e:S.push(e):this.series.options.nodes=[e],i(s,!0)&&this.series.chart.redraw(t)}}o.compose=function(l,s){let t=l.prototype,r=s.prototype;return t.setNodeState=y,t.setState=y,t.update=f,r.destroy=n,r.setData=p,s},o.createNode=function(l){let s=this.pointClass,t=(a,m)=>d(a,v=>v.id===m),r=t(this.nodes,l),S;if(!r){S=this.options.nodes&&t(this.options.nodes,l);let a=new s(this,I({className:"highcharts-node",isNode:!0,id:l,y:1},S));a.linksTo=[],a.linksFrom=[],a.getSum=function(){let m=0,v=0;return a.linksTo.forEach(W=>{m+=W.weight||0}),a.linksFrom.forEach(W=>{v+=W.weight||0}),Math.max(m,v)},a.offset=function(m,v){let W=0;for(let e=0;e<a[v].length;e++){if(a[v][e]===m)return W;W+=a[v][e].weight}},a.hasShape=function(){let m=0;return a.linksTo.forEach(v=>{v.outgoing&&m++}),!a.linksTo.length||m!==a.linksTo.length},a.index=this.nodes.push(a)-1,r=a}return r.formatPrefix="node",r.name=r.name||r.options.id||"",r.mass=i(r.options.mass,r.options.marker&&r.options.marker.radius,this.options.marker&&this.options.marker.radius,4),r},o.destroy=n,o.generatePoints=function(){let l=this.chart,s={};z.generatePoints.call(this),this.nodes||(this.nodes=[]),this.colorCounter=0,this.nodes.forEach(t=>{t.linksFrom.length=0,t.linksTo.length=0,t.level=t.options.level}),this.points.forEach(t=>{L(t.from)&&(s[t.from]||(s[t.from]=this.createNode(t.from)),s[t.from].linksFrom.push(t),t.fromNode=s[t.from],l.styledMode?t.colorIndex=i(t.options.colorIndex,s[t.from].colorIndex):t.color=t.options.color||s[t.from].color),L(t.to)&&(s[t.to]||(s[t.to]=this.createNode(t.to)),s[t.to].linksTo.push(t),t.toNode=s[t.to]),t.name=t.name||t.id},this),this.nodeLookup=s},o.setNodeState=y,o.updateNode=f}(D||(D={})),D}),E(g,"Series/Sankey/SankeyPoint.js",[g["Core/Series/Point.js"],g["Core/Series/SeriesRegistry.js"],g["Core/Utilities.js"]],function(b,N,D){let{column:z}=N.seriesTypes,{defined:w}=D;class L extends z.prototype.pointClass{applyOptions(d,h){return b.prototype.applyOptions.call(this,d,h),w(this.options.level)&&(this.options.column=this.column=this.options.level),this}getClassName(){return(this.isNode?"highcharts-node ":"highcharts-link ")+b.prototype.getClassName.call(this)}getFromNode(){let d=-1,h;for(let i=0;i<this.linksTo.length;i++){let o=this.linksTo[i];o.fromNode.column>d&&o.fromNode!==this&&(d=(h=o.fromNode).column)}return{fromNode:h,fromColumn:d}}setNodeColumn(){w(this.options.column)||(this.linksTo.length===0?this.column=0:this.column=this.getFromNode().fromColumn+1)}isValid(){return this.isNode||typeof this.weight=="number"}}return L}),E(g,"Series/Sankey/SankeySeriesDefaults.js",[],function(){return{borderWidth:0,colorByPoint:!0,curveFactor:.33,dataLabels:{enabled:!0,backgroundColor:"none",crop:!1,nodeFormat:void 0,nodeFormatter:function(){return this.point.name},format:void 0,formatter:function(){},inside:!0},inactiveOtherPoints:!0,linkColorMode:"from",linkOpacity:.5,opacity:1,minLinkWidth:0,nodeAlignment:"center",nodeWidth:20,nodePadding:10,nodeDistance:30,showInLegend:!1,states:{hover:{linkOpacity:1,opacity:1},inactive:{linkOpacity:.1,opacity:.1,animation:{duration:50}}},tooltip:{followPointer:!0,headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',pointFormat:"{point.fromNode.name} â†’ {point.toNode.name}: <b>{point.weight}</b><br/>",nodeFormat:"{point.name}: <b>{point.sum}</b><br/>"}}}),E(g,"Series/Sankey/SankeyColumnComposition.js",[g["Core/Utilities.js"]],function(b){var N;let{defined:D,relativeLength:z}=b;return function(w){w.compose=function(I,d){return I.sankeyColumn=new L(I,d),I};class L{constructor(d,h){this.points=d,this.series=h}getTranslationFactor(d){let h=this.points,i=h.slice(),o=d.chart,n=d.options.minLinkWidth||0,p,y=0,f,l=(o.plotSizeY||0)-(d.options.borderWidth||0)-(h.length-1)*d.nodePadding;for(;h.length;){for(y=l/h.sankeyColumn.sum(),p=!1,f=h.length;f--;)h[f].getSum()*y<n&&(h.splice(f,1),l=Math.max(0,l-n),p=!0);if(!p)break}for(let s of(h.length=0,i))h.push(s);return y}top(d){let h=this.series,i=h.nodePadding,o=this.points.reduce((n,p)=>(n>0&&(n+=i),n+=Math.max(p.getSum()*d,h.options.minLinkWidth||0)),0);return{top:0,center:.5,bottom:1}[h.options.nodeAlignment||"center"]*((h.chart.plotSizeY||0)-o)}left(d){let h=this.series,i=h.chart,o=h.options.equalNodes,n=i.inverted?i.plotHeight:i.plotWidth,p=h.nodePadding,y=this.points.reduce((f,l)=>(f>0&&(f+=p),f+=o?n/l.series.nodes.length-p:Math.max(l.getSum()*d,h.options.minLinkWidth||0)),0);return((i.plotSizeX||0)-Math.round(y))/2}sum(){return this.points.reduce((d,h)=>d+h.getSum(),0)}offset(d,h){let i=this.points,o=this.series,n=o.nodePadding,p=0,y;if(o.is("organization")&&d.hangsFrom)return{absoluteTop:d.hangsFrom.nodeY};for(let f=0;f<i.length;f++){let l=i[f].getSum(),s=Math.max(l*h,o.options.minLinkWidth||0),t=d.options[o.chart.inverted?"offsetHorizontal":"offsetVertical"],r=d.options.offset||0;if(y=l?s+n:0,i[f]===d)return{relativeTop:p+(D(t)?z(t,s):z(r,y))};p+=y}}}w.SankeyColumnAdditions=L}(N||(N={})),N}),E(g,"Series/TreeUtilities.js",[g["Core/Color/Color.js"],g["Core/Utilities.js"]],function(b,N){let{extend:D,isArray:z,isNumber:w,isObject:L,merge:I,pick:d,relativeLength:h}=N;return{getColor:function(i,o){let n,p,y,f,l,s,t=o.index,r=o.mapOptionsToLevel,S=o.parentColor,a=o.parentColorIndex,m=o.series,v=o.colors,W=o.siblings,e=m.points,c=m.chart.options.chart;return i&&(n=e[i.i],p=r[i.level]||{},n&&p.colorByPoint&&(f=n.index%(v?v.length:c.colorCount),y=v&&v[f]),m.chart.styledMode||(l=d(n&&n.options.color,p&&p.color,y,S&&(u=>{let k=p&&p.colorVariation;return k&&k.key==="brightness"&&t&&W?b.parse(u).brighten(k.to*(t/W)).get():u})(S),m.color)),s=d(n&&n.options.colorIndex,p&&p.colorIndex,f,a,o.colorIndex)),{color:l,colorIndex:s}},getLevelOptions:function(i){let o,n,p,y,f,l,s={};if(L(i))for(y=w(i.from)?i.from:1,l=i.levels,n={},o=L(i.defaults)?i.defaults:{},z(l)&&(n=l.reduce((t,r)=>{let S,a,m;return L(r)&&w(r.level)&&(a=d((m=I({},r)).levelIsConstant,o.levelIsConstant),delete m.levelIsConstant,delete m.level,L(t[S=r.level+(a?0:y-1)])?I(!0,t[S],m):t[S]=m),t},{})),f=w(i.to)?i.to:1,p=0;p<=f;p++)s[p]=I({},o,L(n[p])?n[p]:{});return s},getNodeWidth:function(i,o){let{chart:n,options:p}=i,{nodeDistance:y=0,nodeWidth:f=0}=p,{plotSizeX:l=1}=n;if(f==="auto"){if(typeof y=="string"&&/%$/.test(y))return l/(o+parseFloat(y)/100*(o-1));let s=Number(y);return(l+s)/(o||1)-s}return h(f,l)},setTreeValues:function i(o,n){let p=n.before,y=n.idRoot,f=n.mapIdToNode[y],l=n.levelIsConstant!==!1,s=n.points[o.i],t=s&&s.options||{},r=[],S=0;o.levelDynamic=o.level-(l?0:f.level),o.name=d(s&&s.name,""),o.visible=y===o.id||n.visible===!0,typeof p=="function"&&(o=p(o,n)),o.children.forEach((m,v)=>{let W=D({},n);D(W,{index:v,siblings:o.children.length,visible:o.visible}),m=i(m,W),r.push(m),m.visible&&(S+=m.val)});let a=d(t.value,S);return o.visible=a>=0&&(S>0||o.visible),o.children=r,o.childrenTotal=S,o.isLeaf=o.visible&&!S,o.val=a,o},updateRootId:function(i){let o,n;return L(i)&&(n=L(i.options)?i.options:{},o=d(i.rootNode,n.rootId,""),L(i.userOptions)&&(i.userOptions.rootId=o),i.rootNode=o),o}}}),E(g,"Series/Sankey/SankeySeries.js",[g["Core/Globals.js"],g["Series/NodesComposition.js"],g["Series/Sankey/SankeyPoint.js"],g["Series/Sankey/SankeySeriesDefaults.js"],g["Core/Series/SeriesRegistry.js"],g["Series/Sankey/SankeyColumnComposition.js"],g["Core/Color/Color.js"],g["Series/TreeUtilities.js"],g["Core/Utilities.js"]],function(b,N,D,z,w,L,I,d,h){let{column:i,line:o}=w.seriesTypes,{parse:n}=I,{getLevelOptions:p,getNodeWidth:y}=d,{clamp:f,crisp:l,extend:s,isObject:t,merge:r,pick:S,relativeLength:a,stableSort:m}=h;class v extends i{static getDLOptions(e){let c=t(e.optionsPoint)?e.optionsPoint.dataLabels:{};return r({style:{}},t(e.level)?e.level.dataLabels:{},c)}createNodeColumns(){let e=[];for(let c of this.nodes)c.setNodeColumn(),e[c.column]||(e[c.column]=L.compose([],this)),e[c.column].push(c);for(let c=0;c<e.length;c++)e[c]===void 0&&(e[c]=L.compose([],this));return e}order(e,c){if(e.level===void 0)for(let u of(e.level=c,e.linksFrom))u.toNode&&this.order(u.toNode,c+1)}generatePoints(){if(N.generatePoints.apply(this,arguments),this.orderNodes){for(let e of this.nodes)e.linksTo.length===0&&this.order(e,0);m(this.nodes,(e,c)=>e.level-c.level)}}getNodePadding(){let e=this.options.nodePadding||0;if(this.nodeColumns){let c=this.nodeColumns.reduce((u,k)=>Math.max(u,k.length),0);c*e>this.chart.plotSizeY&&(e=this.chart.plotSizeY/c)}return e}hasData(){return!!this.processedXData.length}pointAttribs(e,c){if(!e)return{};let u=this,k=e.isNode?e.level:e.fromNode.level,x=u.mapOptionsToLevel[k||0]||{},Y=e.options,P=x.states&&x.states[c||""]||{},A=["colorByPoint","borderColor","borderWidth","linkOpacity","opacity"].reduce((X,j)=>(X[j]=S(P[j],Y[j],x[j],u.options[j]),X),{}),R=S(P.color,Y.color,A.colorByPoint?e.color:x.color);return e.isNode?{fill:R,stroke:A.borderColor,"stroke-width":A.borderWidth,opacity:A.opacity}:{fill:I.parse(R).setOpacity(A.linkOpacity).get()}}drawTracker(){i.prototype.drawTracker.call(this,this.points),i.prototype.drawTracker.call(this,this.nodes)}drawPoints(){i.prototype.drawPoints.call(this,this.points),i.prototype.drawPoints.call(this,this.nodes)}drawDataLabels(){i.prototype.drawDataLabels.call(this,this.points),i.prototype.drawDataLabels.call(this,this.nodes)}translate(){this.processedXData||this.processData(),this.generatePoints(),this.nodeColumns=this.createNodeColumns();let e=this,c=this.chart,u=this.options,k=this.nodeColumns,x=k.length;for(let Y of(this.nodeWidth=y(this,x),this.nodePadding=this.getNodePadding(),this.translationFactor=k.reduce((P,A)=>Math.min(P,A.sankeyColumn.getTranslationFactor(e)),1/0),this.colDistance=(c.plotSizeX-this.nodeWidth-u.borderWidth)/Math.max(1,k.length-1),e.mapOptionsToLevel=p({from:1,levels:u.levels,to:k.length-1,defaults:{borderColor:u.borderColor,borderRadius:u.borderRadius,borderWidth:u.borderWidth,color:e.color,colorByPoint:u.colorByPoint,levelIsConstant:!0,linkColor:u.linkColor,linkLineWidth:u.linkLineWidth,linkOpacity:u.linkOpacity,states:u.states}}),k))for(let P of Y)e.translateNode(P,Y);for(let Y of this.nodes)for(let P of Y.linksFrom)(P.weight||P.isNull)&&P.to&&(e.translateLink(P),P.allowShadow=!1)}translateLink(e){let c=(B,U)=>{let V=B.offset(e,U)*P;return Math.min(B.nodeY+V,B.nodeY+(B.shapeArgs&&B.shapeArgs.height||0)-C)},u=e.fromNode,k=e.toNode,x=this.chart,{inverted:Y}=x,P=this.translationFactor,A=this.options,R=S(e.linkColorMode,A.linkColorMode),X=(x.inverted?-this.colDistance:this.colDistance)*A.curveFactor,j=u.nodeX,T=k.nodeX,ee=e.outgoing,C=Math.max(e.weight*P,this.options.minLinkWidth),O=c(u,"linksFrom"),F=c(k,"linksTo"),M=this.nodeWidth,G=T>j+M;if(x.inverted&&(O=x.plotSizeY-O,F=(x.plotSizeY||0)-F,M=-M,C=-C,G=j>T),e.shapeType="path",e.linkBase=[O,O+C,F,F+C],G&&typeof F=="number")e.shapeArgs={d:[["M",j+M,O],["C",j+M+X,O,T-X,F,T,F],["L",T+(ee?M:0),F+C/2],["L",T,F+C],["C",T-X,F+C,j+M+X,O+C,j+M,O+C],["Z"]]};else if(typeof F=="number"){let B=x.plotHeight-O-C,U=T-20-C,V=T-20,q=j+M,$=q+20,oe=$+C,ne=O,J=O+C,ie=J+20,K=ie+B,_=K+20,te=_+C,se=F,Q=se+C,re=Q+20,ce=J-.7*C,le=_+.7*C,ue=Q-.7*C,ae=T-.7*C,de=q+.7*C;e.shapeArgs={d:[["M",q,ne],["C",de,ne,oe,ce,oe,ie],["L",oe,K],["C",oe,le,de,te,q,te],["L",T,te],["C",ae,te,U,le,U,K],["L",U,re],["C",U,ue,ae,se,T,se],["L",T,Q],["C",V,Q,V,Q,V,re],["L",V,K],["C",V,_,V,_,T,_],["L",q,_],["C",$,_,$,_,$,K],["L",$,ie],["C",$,J,$,J,q,J],["Z"]]}}if(e.dlBox={x:j+(T-j+M)/2,y:O+(F-O)/2,height:C,width:0},e.tooltipPos=x.inverted?[x.plotSizeY-e.dlBox.y-C/2,x.plotSizeX-e.dlBox.x]:[e.dlBox.x,e.dlBox.y+C/2],e.y=e.plotY=1,e.x=e.plotX=1,!e.options.color){if(R==="from")e.color=u.color;else if(R==="to")e.color=k.color;else if(R==="gradient"){let B=n(u.color).get(),U=n(k.color).get();e.color={linearGradient:{x1:1,x2:0,y1:0,y2:0},stops:[[0,Y?B:U],[1,Y?U:B]]}}}}translateNode(e,c){let u=this.translationFactor,k=this.chart,x=this.options,{borderRadius:Y,borderWidth:P=0}=x,A=e.getSum(),R=Math.max(Math.round(A*u),this.options.minLinkWidth),X=Math.round(this.nodeWidth),j=c.sankeyColumn.offset(e,u),T=l(S(j.absoluteTop,c.sankeyColumn.top(u)+j.relativeTop),P),ee=l(this.colDistance*e.column+P/2,P)+a(e.options[k.inverted?"offsetVertical":"offsetHorizontal"]||0,X),C=k.inverted?k.plotSizeX-ee:ee;if(e.sum=A,A){e.shapeType="roundedRect",e.nodeX=C,e.nodeY=T;let O=C,F=T,M=e.options.width||x.width||X,G=e.options.height||x.height||R,B=f(a(typeof Y=="object"?Y.radius:Y||0,M),0,R/2);k.inverted&&(O=C-X,F=k.plotSizeY-T-R,M=e.options.height||x.height||X,G=e.options.width||x.width||R),e.dlOptions=v.getDLOptions({level:this.mapOptionsToLevel[e.level],optionsPoint:e.options}),e.plotX=1,e.plotY=1,e.tooltipPos=k.inverted?[k.plotSizeY-F-G/2,k.plotSizeX-O-M/2]:[O+M/2,F+G/2],e.shapeArgs={x:O,y:F,width:M,height:G,r:B,display:e.hasShape()?"":"none"}}else e.dlOptions={enabled:!1}}}return v.defaultOptions=r(i.defaultOptions,z),N.compose(D,v),s(v.prototype,{animate:o.prototype.animate,createNode:N.createNode,forceDL:!0,invertible:!0,isCartesian:!1,orderNodes:!0,noSharedTooltip:!0,pointArrayMap:["from","to","weight"],pointClass:D,searchPoint:b.noop}),w.registerSeriesType("sankey",v),v}),E(g,"masters/modules/sankey.src.js",[g["Core/Globals.js"]],function(b){return b})})})(he);var pe=he.exports;const ge=fe(pe),ke=me({__proto__:null,default:ge},[pe]);export{ke as s};
