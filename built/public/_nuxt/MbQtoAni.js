import{b7 as st}from"./DPHdV5Tz.js";function ot(I,R){for(var u=0;u<R.length;u++){const T=R[u];if(typeof T!="string"&&!Array.isArray(T)){for(const y in T)if(y!=="default"&&!(y in I)){const d=Object.getOwnPropertyDescriptor(T,y);d&&Object.defineProperty(I,y,d.get?d:{enumerable:!0,get:()=>T[y]})}}}return Object.freeze(Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}))}var et={exports:{}};(function(I){(function(R){I.exports?(R.default=R,I.exports=R):R(typeof Highcharts<"u"?Highcharts:void 0)})(function(R){var u=R?R._modules:{};function T(y,d,l,t){y.hasOwnProperty(d)||(y[d]=t.apply(null,l),typeof CustomEvent=="function"&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:d,module:y[d]}})))}T(u,"Series/PathUtilities.js",[],function(){function y(d,l){let t=[];for(let e=0;e<d.length;e++){let o=d[e][1],r=d[e][2];if(typeof o=="number"&&typeof r=="number")if(e===0)t.push(["M",o,r]);else if(e===d.length-1)t.push(["L",o,r]);else if(l){let h=d[e-1],p=d[e+1];if(h&&p){let n=h[1],v=h[2],m=p[1],f=p[2];if(typeof n=="number"&&typeof m=="number"&&typeof v=="number"&&typeof f=="number"&&n!==m&&v!==f){let x=n<m?1:-1,P=v<f?1:-1;t.push(["L",o-x*Math.min(Math.abs(o-n),l),r-P*Math.min(Math.abs(r-v),l)],["C",o,r,o,r,o+x*Math.min(Math.abs(o-m),l),r+P*Math.min(Math.abs(r-f),l)])}}}else t.push(["L",o,r])}return t}return{applyRadius:y,getLinkPath:{default:function(d){let{x1:l,y1:t,x2:e,y2:o,width:r=0,inverted:h=!1,radius:p,parentVisible:n}=d;return n?y([["M",l,t],["L",l+r*(h?-.5:.5),t],["L",l+r*(h?-.5:.5),o],["L",e,o]],p):[["M",l,t],["L",l,t],["C",l,t,l,o,l,o],["L",l,o],["C",l,t,l,o,l,o],["L",l,o]]},straight:function(d){let{x1:l,y1:t,x2:e,y2:o,width:r=0,inverted:h=!1,parentVisible:p}=d;return p?[["M",l,t],["L",l+r*(h?-1:1),o],["L",e,o]]:[["M",l,t],["L",l,o],["L",l,o]]},curved:function(d){let{x1:l,y1:t,x2:e,y2:o,offset:r=0,width:h=0,inverted:p=!1,parentVisible:n}=d;return n?[["M",l,t],["C",l+r,t,l-r+h*(p?-1:1),o,l+h*(p?-1:1),o],["L",e,o]]:[["M",l,t],["C",l,t,l,o,l,o],["L",e,o]]}}}}),T(u,"Series/Treegraph/TreegraphNode.js",[u["Core/Series/SeriesRegistry.js"]],function(y){let{seriesTypes:{treemap:{prototype:{NodeClass:d}}}}=y;return class extends d{constructor(){super(...arguments),this.mod=0,this.shift=0,this.change=0,this.children=[],this.preX=0,this.hidden=!1,this.wasVisited=!1,this.collapsed=!1}nextLeft(){return this.getLeftMostChild()||this.thread}nextRight(){return this.getRightMostChild()||this.thread}getAncestor(l,t){return l.ancestor.children[0]===this.children[0]?l.ancestor:t}getLeftMostSibling(){let l=this.getParent();if(l){for(let t of l.children)if(t&&t.point.visible)return t}}hasChildren(){let l=this.children;for(let t=0;t<l.length;t++)if(l[t].point.visible)return!0;return!1}getLeftSibling(){let l=this.getParent();if(l){let t=l.children;for(let e=this.relativeXPosition-1;e>=0;e--)if(t[e]&&t[e].point.visible)return t[e]}}getLeftMostChild(){let l=this.children;for(let t=0;t<l.length;t++)if(l[t].point.visible)return l[t]}getRightMostChild(){let l=this.children;for(let t=l.length-1;t>=0;t--)if(l[t].point.visible)return l[t]}getParent(){return this.parentNode}getFirstChild(){let l=this.children;for(let t=0;t<l.length;t++)if(l[t].point.visible)return l[t]}}}),T(u,"Series/Treegraph/TreegraphPoint.js",[u["Core/Series/Point.js"],u["Core/Series/SeriesRegistry.js"],u["Core/Utilities.js"]],function(y,d,l){let{seriesTypes:{treemap:{prototype:{pointClass:t}}}}=d,{addEvent:e,fireEvent:o,merge:r}=l;class h extends t{constructor(){super(...arguments),this.dataLabelOnHidden=!0,this.isLink=!1,this.setState=y.prototype.setState}draw(){super.draw.apply(this,arguments);let n=this.graphic;n&&n.animate({visibility:this.visible?"inherit":"hidden"}),this.renderCollapseButton()}renderCollapseButton(){let n=this.series,v=this.graphic&&this.graphic.parentGroup,m=n.mapOptionsToLevel[this.node.level||0]||{},f=r(n.options.collapseButton,m.collapseButton,this.options.collapseButton),{width:x,height:P,shape:F,style:_}=f,U=this.series.chart,Y=this.visible&&(this.collapsed||!f.onlyOnHover||this.state==="hover")?1:0;if(this.shapeArgs)if(this.collapseButtonOptions=f,this.collapseButton)if(this.node.children.length&&f.enabled){let{x:V,y:O}=this.getCollapseBtnPosition(f);this.collapseButton.attr({text:this.collapsed?"+":"-",rotation:U.inverted?90:0,rotationOriginX:x/2,rotationOriginY:P/2,visibility:this.visible?"inherit":"hidden"}).animate({x:V,y:O,opacity:Y})}else this.collapseButton.destroy(),delete this.collapseButton;else{if(!this.node.children.length||!f.enabled)return;let{x:V,y:O}=this.getCollapseBtnPosition(f),j=f.fillColor||this.color||"#cccccc";this.collapseButton=U.renderer.label(this.collapsed?"+":"-",V,O,F).attr({height:P-4,width:x-4,padding:2,fill:j,rotation:U.inverted?90:0,rotationOriginX:x/2,rotationOriginY:P/2,stroke:f.lineColor||"#ffffff","stroke-width":f.lineWidth,"text-align":"center",align:"center",zIndex:1,opacity:Y,visibility:this.visible?"inherit":"hidden"}).addClass("highcharts-tracker").addClass("highcharts-collapse-button").removeClass("highcharts-no-tooltip").css(r({color:typeof j=="string"?U.renderer.getContrast(j):"#333333"},_)).add(v),this.collapseButton.element.point=this}}toggleCollapse(n){let v=this.series;this.update({collapsed:n??!this.collapsed},!1,void 0,!1),o(v,"toggleCollapse"),v.redraw()}destroy(){this.collapseButton&&(this.collapseButton.destroy(),delete this.collapseButton,this.collapseButton=void 0),this.linkToParent&&(this.linkToParent.destroy(),delete this.linkToParent),super.destroy.apply(this,arguments)}getCollapseBtnPosition(n){let v=this.series.chart.inverted,m=n.width,f=n.height,{x=0,y:P=0,width:F=0,height:_=0}=this.shapeArgs||{};return{x:x+n.x+(v?-(.3*f):F+-.3*m),y:P+_/2-f/2+n.y}}}return e(h,"mouseOut",function(){let p=this.collapseButton,n=this.collapseButtonOptions;p&&(n!=null&&n.onlyOnHover)&&!this.collapsed&&p.animate({opacity:0})}),e(h,"mouseOver",function(){var p,n;this.collapseButton&&this.visible&&this.collapseButton.animate({opacity:1},(n=(p=this.series.options.states)==null?void 0:p.hover)==null?void 0:n.animation)}),e(h,"click",function(){this.toggleCollapse()}),h}),T(u,"Series/Treegraph/TreegraphLink.js",[u["Core/Series/Point.js"],u["Core/Utilities.js"],u["Core/Series/SeriesRegistry.js"]],function(y,d,l){let{pick:t,extend:e}=d,{seriesTypes:{column:{prototype:{pointClass:o}}}}=l;return class extends o{constructor(r,h,p,n){super(r,h,p),this.dataLabelOnNull=!0,this.formatPrefix="link",this.isLink=!0,this.node={},this.formatPrefix="link",this.dataLabelOnNull=!0,n&&(this.fromNode=n.node.parentNode.point,this.visible=n.visible,this.toNode=n,this.id=this.toNode.id+"-"+this.fromNode.id)}update(r,h,p,n){let v={id:this.id,formatPrefix:this.formatPrefix};y.prototype.update.call(this,r,!this.isLink&&h,p,n),this.visible=this.toNode.visible,e(this,v),t(h,!0)&&this.series.chart.redraw(p)}}}),T(u,"Series/Treegraph/TreegraphLayout.js",[u["Series/Treegraph/TreegraphNode.js"]],function(y){class d{static createDummyNode(t,e,o){let r=new y;return r.id=t.id+"-"+o,r.ancestor=t,r.children.push(e),r.parent=t.id,r.parentNode=t,r.point=e.point,r.level=e.level-o,r.relativeXPosition=e.relativeXPosition,r.visible=e.visible,t.children[e.relativeXPosition]=r,e.oldParentNode=t,e.relativeXPosition=0,e.parentNode=r,e.parent=r.id,r}calculatePositions(t){let e=t.nodeList;this.resetValues(e);let o=t.tree;o&&(this.calculateRelativeX(o,0),this.beforeLayout(e),this.firstWalk(o),this.secondWalk(o,-o.preX),this.afterLayout(e))}beforeLayout(t){for(let e of t)for(let o of e.children)if(o&&o.level-e.level>1){let r=o.level-e.level-1;for(;r>0;)o=d.createDummyNode(e,o,r),r--}}resetValues(t){for(let e of t)e.mod=0,e.ancestor=e,e.shift=0,e.thread=void 0,e.change=0,e.preX=0}calculateRelativeX(t,e){let o=t.children;for(let r=0,h=o.length;r<h;++r)this.calculateRelativeX(o[r],r);t.relativeXPosition=e}firstWalk(t){let e;if(t.hasChildren()){let o=t.getLeftMostChild();for(let n of t.children)this.firstWalk(n),o=this.apportion(n,o);this.executeShifts(t);let r=t.getLeftMostChild(),h=t.getRightMostChild(),p=(r.preX+h.preX)/2;(e=t.getLeftSibling())?(t.preX=e.preX+1,t.mod=t.preX-p):t.preX=p}else(e=t.getLeftSibling())?(t.preX=e.preX+1,t.mod=t.preX):t.preX=0}secondWalk(t,e){for(let o of(t.yPosition=t.preX+e,t.xPosition=t.level,t.children))this.secondWalk(o,e+t.mod)}executeShifts(t){let e=0,o=0;for(let r=t.children.length-1;r>=0;r--){let h=t.children[r];h.preX+=e,h.mod+=e,o+=h.change,e+=h.shift+o}}apportion(t,e){let o=t.getLeftSibling();if(o){let r=t,h=t,p=o,n=r.getLeftMostSibling(),v=r.mod,m=h.mod,f=p.mod,x=n.mod;for(;p&&p.nextRight()&&r&&r.nextLeft();){p=p.nextRight(),n=n.nextLeft(),r=r.nextLeft(),(h=h.nextRight()).ancestor=t;let P=p.preX+f-(r.preX+v)+1;P>0&&(this.moveSubtree(t.getAncestor(p,e),t,P),v+=P,m+=P),f+=p.mod,v+=r.mod,x+=n.mod,m+=h.mod}p&&p.nextRight()&&!h.nextRight()&&(h.thread=p.nextRight(),h.mod+=f-m),r&&r.nextLeft()&&!n.nextLeft()&&(n.thread=r.nextLeft(),n.mod+=v-x),e=t}return e}moveSubtree(t,e,o){let r=e.relativeXPosition-t.relativeXPosition;e.change-=o/r,e.shift+=o,e.preX+=o,e.mod+=o,t.change+=o/r}afterLayout(t){for(let e of t)e.oldParentNode&&(e.relativeXPosition=e.parentNode.relativeXPosition,e.parent=e.oldParentNode.parent,e.parentNode=e.oldParentNode,delete e.oldParentNode.children[e.relativeXPosition],e.oldParentNode.children[e.relativeXPosition]=e,e.oldParentNode=void 0)}}return d}),T(u,"Series/Treegraph/TreegraphSeriesDefaults.js",[],function(){return{reversed:!1,marker:{radius:10,lineWidth:0,symbol:"circle",fillOpacity:1,states:{}},link:{color:"#666666",lineWidth:1,radius:10,cursor:"default",type:"curved"},collapseButton:{onlyOnHover:!0,enabled:!0,lineWidth:1,x:0,y:0,height:18,width:18,shape:"circle",style:{cursor:"pointer",fontWeight:"bold",fontSize:"1em"}},fillSpace:!1,tooltip:{linkFormat:"{point.fromNode.id} â†’ {point.toNode.id}",pointFormat:"{point.id}"},dataLabels:{defer:!0,linkTextPath:{attributes:{startOffset:"50%"}},enabled:!0,linkFormatter:()=>"",style:{textOverflow:"none"}},nodeDistance:30,nodeWidth:void 0}}),T(u,"Series/Treegraph/TreegraphSeries.js",[u["Series/PathUtilities.js"],u["Core/Series/SeriesRegistry.js"],u["Core/Renderer/SVG/SVGRenderer.js"],u["Series/Treegraph/TreegraphNode.js"],u["Series/Treegraph/TreegraphPoint.js"],u["Series/TreeUtilities.js"],u["Core/Utilities.js"],u["Series/Treegraph/TreegraphLink.js"],u["Series/Treegraph/TreegraphLayout.js"],u["Series/Treegraph/TreegraphSeriesDefaults.js"]],function(y,d,l,t,e,o,r,h,p,n){let{getLinkPath:v}=y,{series:{prototype:m},seriesTypes:{treemap:f,column:x}}=d,{prototype:{symbols:P}}=l,{getLevelOptions:F,getNodeWidth:_}=o,{arrayMax:U,crisp:Y,extend:V,merge:O,pick:j,relativeLength:Q,splat:tt}=r;class J extends f{constructor(){super(...arguments),this.nodeList=[],this.links=[]}init(){super.init.apply(this,arguments),this.layoutAlgorythm=new p}getLayoutModifiers(){let i=this.chart,a=this,s=i.plotSizeX,c=i.plotSizeY,g=U(this.points.map(S=>S.node.xPosition)),k=1/0,X=-1/0,L=1/0,W=-1/0,z=0,E=0,A=0,N=0;this.points.forEach(S=>{if(this.options.fillSpace&&!S.visible)return;let b=S.node,H=a.mapOptionsToLevel[S.node.level]||{},C=O(this.options.marker,H.marker,S.options.marker),G=C.width??_(this,g),$=Q(C.radius||0,Math.min(s,c)),K=C.symbol,q=K!=="circle"&&C.height?Q(C.height,c):2*$,Z=K!=="circle"&&G?Q(G,s):2*$;b.nodeSizeX=Z,b.nodeSizeY=q,b.xPosition<=k&&(k=b.xPosition,E=Math.max(Z+(C.lineWidth||0),E)),b.xPosition>=X&&(X=b.xPosition,z=Math.max(Z+(C.lineWidth||0),z)),b.yPosition<=L&&(L=b.yPosition,N=Math.max(q+(C.lineWidth||0),N)),b.yPosition>=W&&(W=b.yPosition,A=Math.max(q+(C.lineWidth||0),A))});let B=W===L?1:(c-(N+A)/2)/(W-L),M=W===L?c/2:-B*L+N/2,D=X===k?1:(s-(z+z)/2)/(X-k),w=X===k?s/2:-D*k+E/2;return{ax:D,bx:w,ay:B,by:M}}getLinks(){let i=this,a=[];return this.data.forEach(s=>{let c=i.mapOptionsToLevel[s.node.level||0]||{};if(s.node.parent){let g=O(c,s.options);if(!s.linkToParent||s.linkToParent.destroyed){let k=new i.LinkClass(i,g,void 0,s);s.linkToParent=k}else s.collapsed=j(s.collapsed,(this.mapOptionsToLevel[s.node.level]||{}).collapsed),s.linkToParent.visible=s.linkToParent.toNode.visible;s.linkToParent.index=a.push(s.linkToParent)-1}else s.linkToParent&&(i.links.splice(s.linkToParent.index),s.linkToParent.destroy(),delete s.linkToParent)}),a}buildTree(i,a,s,c,g){let k=this.points[a];return s=k&&k.level||s,super.buildTree.call(this,i,a,s,c,g)}markerAttribs(){return{}}setCollapsedStatus(i,a){let s=i.point;s&&(s.collapsed=j(s.collapsed,(this.mapOptionsToLevel[i.level]||{}).collapsed),s.visible=a,a=a!==!1&&!s.collapsed),i.children.forEach(c=>{this.setCollapsedStatus(c,a)})}drawTracker(){x.prototype.drawTracker.apply(this,arguments),x.prototype.drawTracker.call(this,this.links)}translate(){let i=this.options,a=o.updateRootId(this),s;m.translate.call(this);let c=this.tree=this.getTree();s=this.nodeMap[a],a===""||s&&s.children.length||(this.setRootNode("",!1),a=this.rootNode,s=this.nodeMap[a]),this.mapOptionsToLevel=F({from:s.level+1,levels:i.levels,to:c.height,defaults:{levelIsConstant:this.options.levelIsConstant,colorByPoint:i.colorByPoint}}),this.setCollapsedStatus(c,!0),this.links=this.getLinks(),this.setTreeValues(c),this.layoutAlgorythm.calculatePositions(this),this.layoutModifier=this.getLayoutModifiers(),this.points.forEach(g=>{this.translateNode(g)}),this.points.forEach(g=>{g.linkToParent&&this.translateLink(g.linkToParent)}),i.colorByPoint||this.setColorRecursive(this.tree)}translateLink(i){var X,L,W,z,E;let a=i.fromNode,s=i.toNode,c=((X=this.options.link)==null?void 0:X.lineWidth)||0,g=j((L=this.options.link)==null?void 0:L.curveFactor,.5),k=j((W=i.options.link)==null?void 0:W.type,(z=this.options.link)==null?void 0:z.type,"default");if(a.shapeArgs&&s.shapeArgs){let A=a.shapeArgs.width||0,N=this.chart.inverted,B=Y((a.shapeArgs.y||0)+(a.shapeArgs.height||0)/2,c),M=Y((s.shapeArgs.y||0)+(s.shapeArgs.height||0)/2,c),D=Y((a.shapeArgs.x||0)+A,c),w=Y(s.shapeArgs.x||0,c);N&&(D-=A,w+=s.shapeArgs.width||0);let S=s.node.xPosition-a.node.xPosition;i.shapeType="path";let b=(Math.abs(w-D)+A)/S-A,H=Y((w+D)/2,c);i.plotX=H,i.plotY=M,i.shapeArgs={d:v[k]({x1:D,y1:B,x2:w,y2:M,width:b,offset:b*g*(N?-1:1),inverted:N,parentVisible:s.visible,radius:(E=this.options.link)==null?void 0:E.radius})},i.dlBox={x:(D+w)/2,y:(B+M)/2,height:c,width:0},i.tooltipPos=N?[(this.chart.plotSizeY||0)-i.dlBox.y,(this.chart.plotSizeX||0)-i.dlBox.x]:[i.dlBox.x,i.dlBox.y]}}drawNodeLabels(i){let a,s,c=this.mapOptionsToLevel;for(let g of i)s=c[g.node.level],a={style:{}},s&&s.dataLabels&&(a=O(a,s.dataLabels),this.hasDataLabels=()=>!0),g.shapeArgs&&!tt(this.options.dataLabels)[0].style.width&&(a.style.width=g.shapeArgs.width,g.dataLabel&&g.dataLabel.css({width:g.shapeArgs.width+"px"})),g.dlOptions=O(a,g.options.dataLabels);m.drawDataLabels.call(this,i)}alignDataLabel(i,a){let s=i.visible;i.visible=!0,super.alignDataLabel.apply(this,arguments),a.animate({opacity:s===!1?0:1},void 0,function(){s||a.hide()}),i.visible=s}drawDataLabels(){this.options.dataLabels&&(this.options.dataLabels=tt(this.options.dataLabels),this.drawNodeLabels(this.points),m.drawDataLabels.call(this,this.links))}destroy(){if(this.links){for(let i of this.links)i.destroy();this.links.length=0}return m.destroy.apply(this,arguments)}pointAttribs(i,a){let s=i&&this.mapOptionsToLevel[i.node.level||0]||{},c=i&&i.options,g=s.states&&s.states[a]||{};i&&(i.options.marker=O(this.options.marker,s.marker,i.options.marker));let k=j(g&&g.link&&g.link.color,c&&c.link&&c.link.color,s&&s.link&&s.link.color,this.options.link&&this.options.link.color),X=j(g&&g.link&&g.link.lineWidth,c&&c.link&&c.link.lineWidth,s&&s.link&&s.link.lineWidth,this.options.link&&this.options.link.lineWidth),L=m.pointAttribs.call(this,i,a);return i&&(i.isLink&&(L.stroke=k,L["stroke-width"]=X,delete L.fill),i.visible||(L.opacity=0)),L}drawPoints(){f.prototype.drawPoints.apply(this,arguments),x.prototype.drawPoints.call(this,this.links)}translateNode(i){let a=this.chart,s=i.node,c=a.plotSizeY,g=a.plotSizeX,{ax:k,bx:X,ay:L,by:W}=this.layoutModifier,z=k*s.xPosition+X,E=L*s.yPosition+W,A=this.mapOptionsToLevel[s.level]||{},N=O(this.options.marker,A.marker,i.options.marker).symbol,B=s.nodeSizeY,M=s.nodeSizeX,D=this.options.reversed,w=s.x=a.inverted?g-M/2-z:z-M/2,S=s.y=D?E-B/2:c-E-B/2,b=j(i.options.borderRadius,A.borderRadius,this.options.borderRadius),H=P[N||"circle"];if(H===void 0?(i.hasImage=!0,i.shapeType="image",i.imageUrl=N.match(/^url\((.*?)\)$/)[1]):i.shapeType="path",!i.visible&&i.linkToParent){let C=i.linkToParent.fromNode;if(C){let{x:G=0,y:$=0,width:K=0,height:q=0}=C.shapeArgs||{};i.shapeArgs||(i.shapeArgs={}),i.hasImage||V(i.shapeArgs,{d:H(G,$,K,q,b?{r:b}:void 0)}),V(i.shapeArgs,{x:G,y:$}),i.plotX=C.plotX,i.plotY=C.plotY}}else i.plotX=w,i.plotY=S,i.shapeArgs={x:w,y:S,width:M,height:B,cursor:i.node.isLeaf?"default":"pointer"},i.hasImage||(i.shapeArgs.d=H(w,S,M,B,b?{r:b}:void 0));i.tooltipPos=a.inverted?[c-S-B/2,g-w-M/2]:[w+M/2,S]}}return J.defaultOptions=O(f.defaultOptions,n),V(J.prototype,{pointClass:e,NodeClass:t,LinkClass:h}),d.registerSeriesType("treegraph",J),J}),T(u,"masters/modules/treegraph.src.js",[u["Core/Globals.js"]],function(y){return y})})})(et);var it=et.exports;const rt=st(it),at=ot({__proto__:null,default:rt},[it]);export{at as t};
